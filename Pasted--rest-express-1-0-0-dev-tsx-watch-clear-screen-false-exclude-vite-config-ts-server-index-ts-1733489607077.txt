> rest-express@1.0.0 dev
> tsx watch --clear-screen=false --exclude vite.config.ts.* server/index.ts

12:38:00 PM [express] Server is running on port 5000

 ERROR(TypeScript)  Parameter 'req' implicitly has an 'any' type.
 FILE  /home/runner/CustomBedtimeStories/server/routes.ts:69:90

    67 |
    68 |   // Handle child photo upload
  > 69 |   app.post('/api/profile/child-photo', upload.single('photo'), handleMulterError, async (req, res) => {
       |                                                                                          ^^^
    70 |     try {
    71 |       if (!req.isAuthenticated || !req.isAuthenticated()) {
    72 |         return res.status(401).json({ error: "Not logged in" });

 ERROR(TypeScript)  Parameter 'res' implicitly has an 'any' type.
 FILE  /home/runner/CustomBedtimeStories/server/routes.ts:69:95

    67 |
    68 |   // Handle child photo upload
  > 69 |   app.post('/api/profile/child-photo', upload.single('photo'), handleMulterError, async (req, res) => {
       |                                                                                               ^^^
    70 |     try {
    71 |       if (!req.isAuthenticated || !req.isAuthenticated()) {
    72 |         return res.status(401).json({ error: "Not logged in" });

[TypeScript] Found 2 errors. Watching for file changes.
Login endpoint hit, authenticated user: true
User authenticated successfully: { id: 7, email: 'sandeep@findemy.com' }
Session saved successfully
saveImageFile called with: {
  bufferSize: 495743,
  originalFormat: 'jpeg',
  maxSizeMB: 5,
  SUPPORTED_IMAGE_FORMATS: {
    png: 'image/png',
    jpg: 'image/jpeg',
    jpeg: 'image/jpeg',
    webp: 'image/webp'
  }
}
Saving image file: {
  fileName: '9c983d6a-7fb5-4f43-abd5-2fb67393bfdb.jpeg',
  filePath: '/home/runner/CustomBedtimeStories/public/images/9c983d6a-7fb5-4f43-abd5-2fb67393bfdb.jpeg',
  exists: true,
  timestamp: '2024-12-06T12:52:10.372Z'
}
Image file saved successfully: {
  fileName: '9c983d6a-7fb5-4f43-abd5-2fb67393bfdb.jpeg',
  size: 495743,
  timestamp: '2024-12-06T12:52:10.376Z'
}
12:52:10 PM [express] POST /api/profile/child-photo 200 in 247ms :: {"childPhotoUrl":"/images/9c983d6â€¦
Image request received: {
  filename: '9c983d6a-7fb5-4f43-abd5-2fb67393bfdb.jpeg',
  timestamp: '2024-12-06T12:52:10.918Z',
  headers: {
    host: '2ffe566c-cb05-4095-a6b7-b5a9faa249e5-00-3k9mkisuk4qrd.sisko.replit.dev',
    'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36',
    accept: 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'en-US,en;q=0.9',
    cookie: 'sid=s%3A3rvJ1RKsw0Esl7jDs4juIP3Nj0PBV-xP.BrGvdHgDJXnsaRmeZdDuK5oI%2F8QYaeKf1tdovd%2FfbDo',
    dnt: '1',
    referer: 'https://2ffe566c-cb05-4095-a6b7-b5a9faa249e5-00-3k9mkisuk4qrd.sisko.replit.dev/profile',
    'sec-ch-ua': '"Google Chrome";v="131", "Chromium";v="131", "Not_A Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"macOS"',
    'sec-fetch-dest': 'image',
    'sec-fetch-mode': 'no-cors',
    'sec-fetch-site': 'same-origin',
    'x-forwarded-for': '103.197.74.154, 10.84.3.208',
    'x-forwarded-proto': 'https',
    'x-replit-user-bio': '',
    'x-replit-user-id': '',
    'x-replit-user-name': '',
    'x-replit-user-profile-image': '',
    'x-replit-user-roles': '',
    'x-replit-user-teams': '',
    'x-replit-user-url': ''
  }
}
Checking image in database: {
  filename: '9c983d6a-7fb5-4f43-abd5-2fb67393bfdb.jpeg',
  timestamp: '2024-12-06T12:52:10.919Z'
}
Image lookup result: {
  filename: '9c983d6a-7fb5-4f43-abd5-2fb67393bfdb.jpeg',
  foundInStorySegments: false,
  foundInUserProfile: true,
  timestamp: '2024-12-06T12:52:11.466Z'
}
Resolved file path: {
  filePath: '/home/runner/CustomBedtimeStories/public/images/9c983d6a-7fb5-4f43-abd5-2fb67393bfdb.jpeg',
  timestamp: '2024-12-06T12:52:11.466Z'
}
Image file stats: {
  size: 495743,
  path: '/home/runner/CustomBedtimeStories/public/images/9c983d6a-7fb5-4f43-abd5-2fb67393bfdb.jpeg',
  exists: true,
  timestamp: '2024-12-06T12:52:11.466Z'
}
