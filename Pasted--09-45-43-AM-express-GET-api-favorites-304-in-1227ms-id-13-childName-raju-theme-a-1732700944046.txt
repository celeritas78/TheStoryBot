
]
09:45:43 AM [express] GET /api/favorites 304 in 1227ms :: [{"id":13,"childName":"raju","theme":"advenâ€¦
Received story generation request: {
  childName: 'bittu',
  childAge: 5,
  mainCharacter: 'computer, coding, games, competition',
  theme: 'fantasy',
  timestamp: '2024-11-27T09:46:40.309Z'
}
Starting story generation process with params: {
  childName: 'bittu',
  childAge: 5,
  mainCharacter: 'computer, coding, games, competition',
  theme: 'fantasy'
}
Generating story content with params: {
  childName: 'bittu',
  childAge: 5,
  mainCharacter: 'computer, coding, games, competition',
  theme: 'fantasy',
  hasPreviousContent: false
}
Successfully generated story content: {
  textLength: 1246,
  sceneDescriptionLength: 482,
  preview: 'Story Text:\n' +
    '\n' +
    'In an enchanting world lived a lively 5-year-old named Bittu. Bittu had a dear friend, ...'
}
Successfully generated story content: { contentLength: 1246, sceneDescriptionLength: 482 }
Generating image with sanitized prompt: {
  originalLength: 482,
  sanitizedLength: 482,
  promptPreview: 'Create a cheerful, child-friendly storybook illustration with the following scene: The picture shows...'
}
Generated image URL: https://oaidalleapiprodscus.blob.core.windows.net/private/org-8hqUrMQvREaIO7bDZXZNpDR1/user-RcpYfzRbtZ5ra2JTLyVdShGs/img-OnTHHT3AxgZkTYo5sVkRjVmY.png?st=2024-11-27T08%3A47%3A11Z&se=2024-11-27T10%3A47%3A11Z&sp=r&sv=2024-08-04&sr=b&rscd=inline&rsct=image/png&skoid=d505667d-d6c1-4a0a-bac7-5c84a87759f8&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2024-11-27T00%3A46%3A12Z&ske=2024-11-28T00%3A46%3A12Z&sks=b&skv=2024-08-04&sig=CiWTuZY4abLQvAA7ywDgxtZzPkhoE4TIbaFABz6YyAQ%3D
Generating speech for text: Story Text:

In an enchanting world lived a lively 5-year-old named Bittu. Bittu had a dear friend, ...
Successfully saved audio file: /audio/9a2af990-17cd-4a29-b65d-76e15dca2ec5.mp3
Generated audio URL: /audio/9a2af990-17cd-4a29-b65d-76e15dca2ec5.mp3
Successfully created story record: { storyId: 16 }
Error generating story: error: duplicate key value violates unique constraint "story_segments_pkey"
    at file:///home/runner/CustomBedtimeStories/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at NeonPreparedQuery.execute (/home/runner/CustomBedtimeStories/node_modules/src/neon-serverless/session.ts:102:18)
    at <anonymous> (/home/runner/CustomBedtimeStories/server/routes.ts:195:28) {
  length: 207,
  severity: 'ERROR',
  code: '23505',
  detail: 'Key (id)=(1) already exists.',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'story_segments',
  column: undefined,
  dataType: undefined,
  constraint: 'story_segments_pkey',
  file: 'nbtinsert.c',
  line: '666',
  routine: '_bt_check_unique'
}
09:47:29 AM [express] POST /api/stories 500 in 49045ms :: {"error":"Failed to generate story"}