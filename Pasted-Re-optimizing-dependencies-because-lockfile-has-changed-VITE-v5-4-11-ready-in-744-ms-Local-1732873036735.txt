Re-optimizing dependencies because lockfile has changed

  VITE v5.4.11  ready in 744 ms

  ➜  Local:   http://localhost:5000/
  ➜  Network: http://172.31.196.110:5000/
  ➜  press h + enter to show help

 ERROR(TypeScript)  Cannot find name 'useRef'.
 FILE  /home/runner/CustomBedtimeStories/client/src/components/StoryViewer.tsx:42:21

    40 |
    41 |   // Audio management
  > 42 |   const audioRefs = useRef<{[key: number]: HTMLAudioElement}>({});
       |                     ^^^^^^
    43 |   
    44 |   // Register audio element
    45 |   const registerAudioElement = (index: number, element: HTMLAudioElement | null) => {

 ERROR(TypeScript)  'audio' is of type 'unknown'.
 FILE  /home/runner/CustomBedtimeStories/client/src/components/StoryViewer.tsx:56:46

    54 |   const stopOtherAudio = (currentIndex: number) => {
    55 |     Object.entries(audioRefs.current).forEach(([index, audio]) => {
  > 56 |       if (Number(index) !== currentIndex && !audio.paused) {
       |                                              ^^^^^
    57 |         audio.pause();
    58 |         audio.currentTime = 0;
    59 |       }

 ERROR(TypeScript)  'audio' is of type 'unknown'.
 FILE  /home/runner/CustomBedtimeStories/client/src/components/StoryViewer.tsx:57:9

    55 |     Object.entries(audioRefs.current).forEach(([index, audio]) => {
    56 |       if (Number(index) !== currentIndex && !audio.paused) {
  > 57 |         audio.pause();
       |         ^^^^^
    58 |         audio.currentTime = 0;
    59 |       }
    60 |     });

 ERROR(TypeScript)  'audio' is of type 'unknown'.
 FILE  /home/runner/CustomBedtimeStories/client/src/components/StoryViewer.tsx:58:9

    56 |       if (Number(index) !== currentIndex && !audio.paused) {
    57 |         audio.pause();
  > 58 |         audio.currentTime = 0;
       |         ^^^^^
    59 |       }
    60 |     });
    61 |   };

 ERROR(TypeScript)  'audio' is of type 'unknown'.
 FILE  /home/runner/CustomBedtimeStories/client/src/components/StoryViewer.tsx:72:14

    70 |     return () => {
    71 |       Object.values(audioRefs.current).forEach(audio => {
  > 72 |         if (!audio.paused) {
       |              ^^^^^
    73 |           audio.pause();
    74 |           audio.currentTime = 0;
    75 |         }

 ERROR(TypeScript)  'audio' is of type 'unknown'.
 FILE  /home/runner/CustomBedtimeStories/client/src/components/StoryViewer.tsx:73:11

    71 |       Object.values(audioRefs.current).forEach(audio => {
    72 |         if (!audio.paused) {
  > 73 |           audio.pause();
       |           ^^^^^
    74 |           audio.currentTime = 0;
    75 |         }
    76 |       });

 ERROR(TypeScript)  'audio' is of type 'unknown'.
 FILE  /home/runner/CustomBedtimeStories/client/src/components/StoryViewer.tsx:74:11

    72 |         if (!audio.paused) {
    73 |           audio.pause();
  > 74 |           audio.currentTime = 0;
       |           ^^^^^
    75 |         }
    76 |       });
    77 |     };

 ERROR(TypeScript)  Element implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ mp3: string; wav: string; m4a: string; opus: string; aac: string; ogg: string; webm: string; }'.
  No index signature with a parameter of type 'string' was found on type '{ mp3: string; wav: string; m4a: string; opus: string; aac: string; ogg: string; webm: string; }'.
 FILE  /home/runner/CustomBedtimeStories/server/routes.ts:85:27

    83 |       const fileBuffer = fs.readFileSync(filePath);
    84 |       const audioFormat = detectAudioFormat(fileBuffer);
  > 85 |       const contentType = MIME_TYPES[audioFormat] || 'audio/mpeg';
       |                           ^^^^^^^^^^^^^^^^^^^^^^^
    86 |
    87 |       const stat = fs.statSync(filePath);
    88 |       const range = req.headers.range;

 ERROR(TypeScript)  Cannot redeclare block-scoped variable 'scenes'.
 FILE  /home/runner/CustomBedtimeStories/server/services/openai.ts:106:11

    104 |     console.log('Raw content from OpenAI:', content);
    105 |     // Parse the content into title and scenes
  > 106 |     const scenes: Scene[] = [];
        |           ^^^^^^
    107 |     
    108 |     // Extract title from ** markers with fallback
    109 |     let title: string;

 ERROR(TypeScript)  Cannot redeclare block-scoped variable 'scenes'.
 FILE  /home/runner/CustomBedtimeStories/server/services/openai.ts:133:11

    131 |     
    132 |     // Extract scenes and descriptions directly
  > 133 |     const scenes: Scene[] = [];
        |           ^^^^^^
    134 |     const sceneMatches = content.matchAll(/\[Scene (\d+)\]([\s\S]*?)(?=\[Scene \d+\]|$)/g);
    135 |     const descriptionMatches = content.matchAll(/\[Scene (\d+) Description\]([\s\S]*?)(?=\[Scene \d+ Description\]|$)/g);
    136 |     

[TypeScript] Found 10 errors. Watching for file changes.