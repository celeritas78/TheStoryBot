> rest-express@1.0.0 dev
01:13:09 PM [express] serving on port 5000 vite.config.ts.* server/index.ts

[TypeScript] Found 0 errors. Watching for file changes.
Fetching favorites...
Favorites fetched: [
  {
    id: 3,
    childName: 'skye',
    theme: 'nature',
    createdAt: 2024-11-26T12:34:41.533Z,
    favoriteId: 2,
    firstSegment: {
      id: 3,
      storyId: 3,
      content: '[Story Text]\n' +
        '\n' +
        'Once upon a time, there was a little 3-year-old girl called Skye. She lived in a magical world filled with her best friends - a friendly dragon named Drako, a kind princess named Lily, a wise frog named Freddy, and a caring mummy named Mummy Mia. \n' +
        '\n' +
        `Every day, they would embark on exciting adventures. They loved exploring the colourful meadows and the fragrant flower fields. One fine day, spotting a beautiful butterfly fluttering about, Skye exclaimed, "Let's follow the butterfly!" Everyone agreed, and off they went. \n` +
        '\n' +
        'As they chased the butterfly, Skye and her friends learned about the different flowers and trees they passed. The princess taught Skye how to make daisy chains, while the frog showed them how to tell time using a sunflower like a sundial. \n' +
        '\n' +
        'Then, Mummy Mia explained why trees shed their leaves in the autumn, and how every leaf turned into soil over time. Listening to her, Skye hugged a tree lovingly. Drako, using his gentle fire breath, toasted marshmallows they had picked earlier. Sharing laughs and marshmallows, they understood the importance and beauty of nature.\n' +
        '\n' +
        `As they headed home, Skye looked at her friends, the butterfly gently landing on her shoulder and confessed, "This is the best day ever!" And so, the sun slowly set on another magical day in Skye's world, filled with love, adventure, and the beauty of the natural world.`,
      imageUrl: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-8hqUrMQvREaIO7bDZXZNpDR1/user-RcpYfzRbtZ5ra2JTLyVdShGs/img-Bqj7gCU4ZleJZQwBuqcjJA5y.png?st=2024-11-26T11%3A34%3A30Z&se=2024-11-26T13%3A34%3A30Z&sp=r&sv=2024-08-04&sr=b&rscd=inline&rsct=image/png&skoid=d505667d-d6c1-4a0a-bac7-5c84a87759f8&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2024-11-25T18%3A55%3A30Z&ske=2024-11-26T18%3A55%3A30Z&sks=b&skv=2024-08-04&sig=TxmLy3VOP%2BPxvxecx11IAQynLvu9nOu0JFKjvq9qIMc%3D',
      audioUrl: '/audio/c7431b1c-c4b3-4b74-a3a9-258b915fe7fd.mp3',
      sequence: 1,
      createdAt: 2024-11-26T12:34:41.771Z
    }
  },
  {
    id: 2,
    childName: 'sam',
    theme: 'friendship',
    createdAt: 2024-11-26T12:28:30.248Z,
    favoriteId: 1,
    firstSegment: {
      id: 2,
      storyId: 2,
      content: '[Story Text]\n' +
        '\n' +
        'Once upon a time, in a house full of laughter, there lived a boy named Sam. Sam loved adventures as much as he loved his family. Sister Ana, Brother Top, loving Mommy, and his little pet tortoise, Turk.\n' +
        '\n' +
        "One sunny day, Sam's friends visited him - Regal, the brave lion from the nearby zoo, and Batman, his favorite superhero action figure, who magically came to life! \n" +
        '\n' +
        `"Oh, what a wonderful surprise!" cheered Sam. They decided to have a fun day out in the backyard, playing with Brother Top's amazing big kite. \n` +
        '\n' +
        'Unfortunately, a sudden gust of wind caught the kite off guard, to where it flew across the fence and got stuck in a huge tree! "Oh no, our kite!" cried Ana.\n' +
        '\n' +
        `But Turk, the slow but clever tortoise, had an idea. "Regal, use your lion's strength! Batman, you have your grappling hook! And Sam, with your courage, we can retrieve the kite!"\n` +
        '\n' +
        'Regal roared, Batman whooshed, and Sam squealed with all his might! Soon, the kite was safely returned. \n' +
        '\n' +
        '"What a fantastic team we make!" Sam gleamed, hugging his friends. They all cheered. In every adventure, no matter how big or small, they always found a way through teamwork and friendship.\n' +
        '\n' +
        `"Superheroes, lions, tortoises, or humans, we're all friends here!" Sam said, laughing. Because in Sam's house, love, adventure, and friendship always reigned supreme.\n` +
        '\n' +
        "So, at the end of the day, they all sat under the twilight sky, telling stories, eating Mother's delicious cookies, just happy to be together, as the best of friends.",
      imageUrl: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-8hqUrMQvREaIO7bDZXZNpDR1/user-RcpYfzRbtZ5ra2JTLyVdShGs/img-FCwVHLk2LYjI8M0yqLEI8oNC.png?st=2024-11-26T11%3A28%3A19Z&se=2024-11-26T13%3A28%3A19Z&sp=r&sv=2024-08-04&sr=b&rscd=inline&rsct=image/png&skoid=d505667d-d6c1-4a0a-bac7-5c84a87759f8&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2024-11-25T18%3A55%3A26Z&ske=2024-11-26T18%3A55%3A26Z&sks=b&skv=2024-08-04&sig=S6RIu2oKaBsmEnAG6OSdWCz/af47FCFHbvMrYfc7TMI%3D',
      audioUrl: '/audio/d98f64d7-bea3-4cfd-b094-102475dc3194.mp3',
      sequence: 1,
      createdAt: 2024-11-26T12:28:30.491Z
    }
  }
]
01:13:37 PM [express] GET /api/favorites 200 in 988ms :: [{"id":3,"childName":"skye","theme":"nature"…
Received story generation request: {
  childName: 'sameer',
  childAge: 4,
  mainCharacter: 'daddy, hanuman, ram and sita, raavan',
  theme: 'adventure',
  timestamp: '2024-11-26T13:14:06.632Z'
}
Starting story generation process with params: {
  childName: 'sameer',
  childAge: 4,
  mainCharacter: 'daddy, hanuman, ram and sita, raavan',
  theme: 'adventure'
}
Generating story content with params: {
  childName: 'sameer',
  childAge: 4,
  mainCharacter: 'daddy, hanuman, ram and sita, raavan',
  theme: 'adventure',
  hasPreviousContent: false
}
Successfully generated story content: {
  textLength: 1882,
  sceneDescriptionLength: 0,
  preview: '[Story Text]\n' +
    '\n' +
    'Once upon a time, there was a brave little boy named Sameer. Sameer loved going on adv...'
}
Successfully generated story content: { contentLength: 1882, sceneDescriptionLength: 0 }
Generating image with sanitized prompt: {
  originalLength: 0,
  sanitizedLength: 0,
  promptPreview: 'Create a cheerful, child-friendly storybook illustration with the following scene: . \n' +
    '      Style gu...'
}
Generated image URL: https://oaidalleapiprodscus.blob.core.windows.net/private/org-8hqUrMQvREaIO7bDZXZNpDR1/user-RcpYfzRbtZ5ra2JTLyVdShGs/img-bwQXT1tS6YWzIhLYUaNMcM9b.png?st=2024-11-26T12%3A14%3A40Z&se=2024-11-26T14%3A14%3A40Z&sp=r&sv=2024-08-04&sr=b&rscd=inline&rsct=image/png&skoid=d505667d-d6c1-4a0a-bac7-5c84a87759f8&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2024-11-26T01%3A29%3A21Z&ske=2024-11-27T01%3A29%3A21Z&sks=b&skv=2024-08-04&sig=fEPgHztQhMVhKkuvaYlw2J0iWM0ar3A9hDS2oWuAQo4%3D
Generating speech for text: [Story Text]

Once upon a time, there was a brave little boy named Sameer. Sameer loved going on adv...
Successfully saved audio file: /audio/a3183b85-d932-4c49-9357-22170388018d.mp3
Generated audio URL: /audio/a3183b85-d932-4c49-9357-22170388018d.mp3
Successfully created story record: { storyId: 4 }
01:15:06 PM [express] POST /api/stories 200 in 59925ms :: {"id":4,"segments":[{"content":"[Story Text…