Fetching all stories...
Stories fetched: 3
09:48:58 AM [express] GET /api/stories 200 in 1188ms :: [{"id":3,"childName":"ana","childAge":4,"char…
09:49:07 AM [express] GET /api/stories/1 200 in 235ms :: {"id":1,"childName":"ana","childAge":4,"char…
09:49:16 AM [express] GET /api/stories/3 200 in 234ms :: {"id":3,"childName":"ana","childAge":4,"char…
09:49:31 AM [express] GET /api/stories/2 200 in 967ms :: {"id":2,"childName":"sam","childAge":5,"char…
Story generation request: {
  childName: 'peter',
  childAge: 5,
  mainCharacter: 'mobile applications, AI, indie developer',
  theme: 'fantasy',
  timestamp: '2024-11-28T09:50:17.926Z'
}
Starting story generation process with params: {
  childName: 'peter',
  childAge: 5,
  mainCharacter: 'mobile applications, AI, indie developer',
  theme: 'fantasy'
}
Generating story content with params: {
  childName: 'peter',
  childAge: 5,
  mainCharacter: 'mobile applications, AI, indie developer',
  theme: 'fantasy',
  hasPreviousContent: false
}
Successfully generated story content: {
  textLength: 2496,
  sceneDescriptionLength: 0,
  preview: '[Story Text]\n' +
    '\n' +
    'Once upon a time, in a cozy small house, lived a curious 5-year-old boy named Peter. H...'
}
Successfully generated story content: { contentLength: 2496, sceneDescriptionLength: 0 }
Generating image with sanitized prompt: {
  originalLength: 0,
  sanitizedLength: 0,
  promptPreview: 'Create a cheerful, child-friendly storybook illustration with the following scene: . \n' +
    '      Style gu...'
}
Generated image URL: https://oaidalleapiprodscus.blob.core.windows.net/private/org-8hqUrMQvREaIO7bDZXZNpDR1/user-RcpYfzRbtZ5ra2JTLyVdShGs/img-Us9Um4oy936Mn3direjHUAjC.png?st=2024-11-28T08%3A50%3A48Z&se=2024-11-28T10%3A50%3A48Z&sp=r&sv=2024-08-04&sr=b&rscd=inline&rsct=image/png&skoid=d505667d-d6c1-4a0a-bac7-5c84a87759f8&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2024-11-28T03%3A19%3A40Z&ske=2024-11-29T03%3A19%3A40Z&sks=b&skv=2024-08-04&sig=GPfxn%2BR/ygZCTS32ujdxhqLUrUEIwy/8RTy4n/8Ez98%3D
Generating speech for text: [Story Text]

Once upon a time, in a cozy small house, lived a curious 5-year-old boy named Peter. H...
9:51:06 AM [tsx] change in ./server/services/openai.ts Restarting...
9:51:07 AM [tsx] change in ./server/services/openai.ts Restarting...
9:51:10 AM [tsx] change in ./server/services/openai.ts Restarting...
09:51:09 AM [express] serving on port 5000
09:51:12 AM [express] serving on port 5000

 ERROR(TypeScript)  'audioRef.current.readyState' is possibly 'undefined'.
 FILE  /home/runner/CustomBedtimeStories/client/src/components/AudioPlayer.tsx:148:52

    146 |   }
    147 |
  > 148 |   if (isLoading || (!audioRef.current?.duration && audioRef.current?.readyState < 4)) {
        |                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    149 |     return (
    150 |       <div className="flex items-center justify-center p-4 text-gray-500">
    151 |         <Loader2 className="h-4 w-4 animate-spin mr-2" />

[TypeScript] Found 1 error. Watching for file changes.
Fetching all stories...
Stories fetched: 3
09:51:49 AM [express] GET /api/stories 304 in 1229ms :: [{"id":3,"childName":"ana","childAge":4,"char…